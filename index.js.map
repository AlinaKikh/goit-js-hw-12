{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48944298-6db138da2f96cff679e6bbba9';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 40;\n\nexport function fetchImages(query, page) {\n    return axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: PER_PAGE,\n            page\n        }\n    }).then(response => response.data)\n    .catch(error => { \n        console.error('Error fetching images:', error.message); \n        throw new Error(error.message);\n    });\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nif (!gallery) throw new Error(\"Gallery element not found!\");\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n    const markup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\" title=\"${image.tags}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <span>Likes: ${image.likes}</span>\n                <span>Views: ${image.views}</span>\n                <span>Comments: ${image.comments}</span>\n                <span>Downloads: ${image.downloads}</span>\n            </div>\n        </a>\n    `).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { PER_PAGE } from './js/pixabay-api.js';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    query = event.target.elements.searchQuery.value.trim();\n    if (!query) {\n        iziToast.warning({ title: 'Warning', message: 'Please enter a search query' });\n        return;\n    }\n\n    page = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n    \n    fetchImages(query, page)\n        .then(response => {\n            totalHits = response.totalHits;\n            \n            if (response.hits.length === 0) {\n                loadMoreBtn.style.display = 'none';\n                iziToast.error({ title: 'Error', message: 'No images found, try another query' });\n            } else {\n                renderImages(response.hits);\n                if (totalHits > PER_PAGE) loadMoreBtn.style.display = 'block';\n            }\n        })\n        .catch(() => iziToast.error({ title: 'Error', message: 'Something went wrong' }))\n        .finally(() => loader.style.display = 'none');\n});\n\nloadMoreBtn.addEventListener('click', () => {\n    page += 1;\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n    \n    fetchImages(query, page)\n        .then(data => {\n            renderImages(data.hits);\n\n            if (page * PER_PAGE >= totalHits) {\n                loadMoreBtn.style.display = 'none';\n                iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n            } else {\n                loadMoreBtn.style.display = 'block';\n            }\n\n            const { height } = gallery.firstElementChild.getBoundingClientRect();\n            window.scrollBy({ top: height * 2, behavior: 'smooth' });\n        })\n        .catch(() => iziToast.error({ title: 'Error', message: 'Something went wrong' }))\n        .finally(() => loader.style.display = 'none');\n});\n\nloader.style.display = 'block';\nsetTimeout(() => {\n    fetchImages(query, page)\n        .then(response => {\n            // код обробки\n        })\n        .finally(() => loader.style.display = 'none');\n}, 2000);\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","response","error","gallery","lightbox","SimpleLightbox","renderImages","images","markup","image","clearGallery","form","loader","loadMoreBtn","totalHits","event","iziToast","data","height"],"mappings":"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"}