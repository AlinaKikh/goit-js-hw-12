{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48944298-6db138da2f96cff679e6bbba9';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nexport async function fetchImages(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: PER_PAGE,\n                page\n            }\n        });\n\n        if (response.status !== 200) {\n            throw new Error(`Error: ${response.status}`);\n        }\n\n        return response.data;\n    } catch (error) {\n        throw new Error(error.response?.data?.message || 'Error fetching images');\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n    gallery.insertAdjacentHTML('beforeend', images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n    `).join(''));\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = event.target.elements.searchQuery.value.trim();\n    if (!query) {\n        iziToast.warning({ title: 'Warning', message: 'Please enter a search query' });\n        return;\n    }\n\n    page = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    loader.classList.add('show');\n    \n    try {\n        const data = await fetchImages(query, page);\n        totalHits = data.totalHits;\n        \n        if (data.hits.length === 0) {\n            iziToast.error({ title: 'Error', message: 'No images found, try another query' });\n        } else {\n            renderImages(data.hits);\n            if (totalHits > 40) loadMoreBtn.style.display = 'block';\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong' });\n    } finally {\n        loader.classList.remove('show');\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    loadMoreBtn.style.display = 'none';\n    loader.classList.add('show');\n    \n    try {\n        const data = await fetchImages(query, page);\n        renderImages(data.hits);\n\n        if (page * 40 >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        } else {\n            loadMoreBtn.style.display = 'block';\n        }\n\n        const { height } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({ top: height * 2, behavior: 'smooth' });\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong' });\n    } finally {\n        loader.classList.remove('show');\n    }\n});\n\nif (data.hits.length < 40) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n} else {\n    loadMoreBtn.style.display = 'block';\n}\n\nif (gallery.firstElementChild) {\n    const { height } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({ top: height * 2, behavior: 'smooth' });\n}"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","response","axios","error","_b","_a","gallery","lightbox","SimpleLightbox","renderImages","images","image","clearGallery","form","loader","loadMoreBtn","totalHits","event","iziToast","data","height"],"mappings":"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"}