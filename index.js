import{a as p,S as w,i as a}from"./assets/vendor-tnUJPedx.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=l(e);fetch(e.href,o)}})();const b="48944298-6db138da2f96cff679e6bbba9",E="https://pixabay.com/api/",L=40;async function h(r,t){var l,n;try{const e=await p.get(E,{params:{key:b,q:r,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:L,page:t}});if(e.status!==200)throw new Error(`Error: ${e.status}`);return e.data}catch(e){throw new Error(((n=(l=e.response)==null?void 0:l.data)==null?void 0:n.message)||"Error fetching images")}}const m=document.querySelector(".gallery"),v=new w(".gallery a");function g(r){m.insertAdjacentHTML("beforeend",r.map(t=>`
        <a href="${t.largeImageURL}" class="gallery-item">
            <img src="${t.webformatURL}" alt="${t.tags}" />
        </a>
    `).join("")),v.refresh()}function S(){m.innerHTML=""}const q=document.querySelector("#search-form"),f=document.querySelector(".gallery"),d=document.querySelector(".loader"),s=document.querySelector(".load-more");let c="",i=1,y=0;q.addEventListener("submit",async r=>{if(r.preventDefault(),c=r.target.elements.searchQuery.value.trim(),!c){a.warning({title:"Warning",message:"Please enter a search query"});return}i=1,S(),s.style.display="none",d.classList.add("show");try{const t=await h(c,i);y=t.totalHits,t.hits.length===0?a.error({title:"Error",message:"No images found, try another query"}):(g(t.hits),y>40&&(s.style.display="block"))}catch{a.error({title:"Error",message:"Something went wrong"})}finally{d.classList.remove("show")}});s.addEventListener("click",async()=>{i+=1,s.style.display="none",d.classList.add("show");try{const r=await h(c,i);g(r.hits),i*40>=y?(s.style.display="none",a.info({message:"We're sorry, but you've reached the end of search results."})):s.style.display="block";const{height:t}=f.firstElementChild.getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})}catch{a.error({title:"Error",message:"Something went wrong"})}finally{d.classList.remove("show")}});data.hits.length<40?(s.style.display="none",a.info({message:"We're sorry, but you've reached the end of search results."})):s.style.display="block";if(f.firstElementChild){const{height:r}=f.firstElementChild.getBoundingClientRect();window.scrollBy({top:r*2,behavior:"smooth"})}
//# sourceMappingURL=index.js.map
