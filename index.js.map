{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48944298-6db138da2f96cff679e6bbba9';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport const PER_PAGE = 40;\n\nexport async function fetchImages(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: PER_PAGE,\n                page\n            }\n        });\n        return response.data;\n    } catch (error) {\n        throw new Error(error.message);\n    }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nif (!gallery) throw new Error(\"Gallery element not found!\");\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n    const markup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\" title=\"${image.tags}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <span>Likes: ${image.likes}</span>\n                <span>Views: ${image.views}</span>\n                <span>Comments: ${image.comments}</span>\n                <span>Downloads: ${image.downloads}</span>\n            </div>\n        </a>\n    `).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { PER_PAGE } from './js/pixabay-api.js';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nasync function handleSearch(event) {\n    event.preventDefault();\n    query = event.target.elements.searchQuery.value.trim();\n    if (!query) {\n        iziToast.warning({ title: 'Warning', message: 'Please enter a search query' });\n        return;\n    }\n\n    page = 1;\n    clearGallery();\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n\n    try {\n        const response = await fetchImages(query, page);\n        totalHits = response.totalHits;\n\n        if (response.hits.length === 0) {\n            iziToast.error({ title: 'Error', message: 'No images found, try another query' });\n        } else {\n            renderImages(response.hits);\n            if (totalHits > PER_PAGE) loadMoreBtn.style.display = 'block';\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong' });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nasync function handleLoadMore() {\n    if (!query) return;\n    page += 1;\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n\n    try {\n        const response = await fetchImages(query, page);\n        renderImages(response.hits);\n\n        if (page * PER_PAGE >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        } else {\n            loadMoreBtn.style.display = 'block';\n        }\n\n        const { height } = gallery.firstElementChild?.getBoundingClientRect() || { height: 0 };\n        window.scrollBy({ top: height * 2, behavior: 'smooth' });\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong' });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nform.addEventListener('submit', handleSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\n\nif (totalHits > PER_PAGE) {\n    loadMoreBtn.style.display = 'block';\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","error","gallery","lightbox","SimpleLightbox","renderImages","images","markup","image","clearGallery","form","loader","loadMoreBtn","totalHits","handleSearch","event","iziToast","response","handleLoadMore","height","_a"],"mappings":"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"}